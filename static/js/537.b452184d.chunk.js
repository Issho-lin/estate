(window.webpackJsonp=window.webpackJsonp||[]).push([[537],{1382:function(e,t,a){"use strict";var n=a(9),i=a(11),c=a(67),o=a(65),r=a(66),l=a(4),d=a.n(l),s=a(125),u=a(1393),m=a.n(u),v=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.titleText,a=e.btnText,n=e.btnClick,i=e.routeText,c=e.routePath,o=e.className,r=e.style;return d.a.createElement("div",{className:o},d.a.createElement("h3",{className:m.a["title-component"],style:r},t,a&&d.a.createElement("a",{onClick:function(){return n()},className:m.a.more},a),i&&d.a.createElement(s.c,{to:c,className:m.a.more},i)))}}]),t}(l.PureComponent);t.a=v},1393:function(e,t,a){e.exports={"title-component":"title-component__1k-XM"}},1466:function(e,t,a){},1472:function(e,t,a){"use strict";a(70),a(608)},1473:function(e,t,a){"use strict";var n=a(596);t.a=n.a},1524:function(e,t,a){"use strict";a(70),a(608)},1525:function(e,t,a){"use strict";var n=a(404);t.a=n.a},1551:function(e,t,a){"use strict";a(1543);var n=a(1544),i=a(9),c=a(11),o=a(67),r=a(65),l=a(66),d=a(4),s=a.n(d),u=a(1552),m=a.n(u),v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.current,i=e.total,c=e.onPageChange,o=e.pageSize,r=e.showQuickJumper,l=e.showSizeChanger,d=e.onShowSizeChange,u=e.showTotal,v=e.pageSizeOptions;return s.a.createElement("div",{className:m.a["pagination-box"],style:t},s.a.createElement(n.a,{defaultCurrent:1,current:a,total:i,onChange:c,pageSize:o||10,showQuickJumper:r,showSizeChanger:l,onShowSizeChange:d,showTotal:u,pageSizeOptions:v}))}}]),t}(d.PureComponent);t.a=v},1552:function(e,t,a){e.exports={"pagination-box":"pagination-box__28fVy"}},1561:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(13),i=a(77),c=a(9),o=a(11),r=a(67),l=a(65),d=a(66),s=a(4),u=a.n(s),m=a(35),v=a.n(m),h=a(245),p=a(1562),f=a.n(p),y=["#5F9BD3","#EB7E3C","#FDBF2D","#FFA6A9","#60E4B8"],g=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.titleArr,a=e.borderColor,c=e.height,o=e.backgroundColor,r=e.isMargin,l=e.lineColor,d=e.handleClick,s=e.style,m=d?{cursor:"pointer"}:{};return u.a.createElement("div",{className:f.a.bg},u.a.createElement("div",{className:f.a["row-flex"],style:{height:c||"1.18rem",backgroundColor:o,borderBottomColor:a}},t.map((function(e,a,c){var o,p;return u.a.createElement("div",Object.assign({className:v()((o={},Object(i.a)(o,f.a["community-title"],!0),Object(i.a)(o,f.a["community-margin"],a!==c.length-1&&r),o)),key:a},(p=e,d?{onClick:function(){return d(p)}}:{}),{style:Object(n.a)({},s,m)}),a<t.length-1&&u.a.createElement("div",{className:v()(Object(i.a)({},f.a.line,!r)),style:{backgroundColor:l}}),u.a.createElement("span",{className:f.a.num,style:{color:e.colorTop||y[a]}},Object(h.c)(e.number)),u.a.createElement("span",{className:f.a.desc,style:{color:e.colorBottom}},e.desc))}))))}}]),t}(s.Component);g.defaultProps={isMargin:!1,titleArr:[]}},1562:function(e,t,a){e.exports={bg:"bg__HNEoM","row-flex":"row-flex__2_Cos","community-title":"community-title__AJwaz",num:"num__YgYy9",desc:"desc__1d40E",line:"line__3FKa6","community-margin":"community-margin__3p9D2"}},2516:function(e,t,a){"use strict";a.r(t);a(599);var n,i=a(407),c=(a(419),a(206)),o=(a(1472),a(1473)),r=(a(1411),a(180)),l=(a(1524),a(1525)),d=(a(622),a(312)),s=a(13),u=a(29),m=a(9),v=a(11),h=a(67),p=a(65),f=a(66),y=a(4),g=a.n(y),b=a(63),C=a(1561),E=a(1382),I=a(1551),S=a(28),w=a(76),j=(a(1466),a(2517)),k=a.n(j),F=a(68),O=a(133),D=a.n(O),N=a(2518),P=a.n(N),L=a(2519),x=a.n(L),_=a(2520),z=a.n(_),V=a(2521),T=a.n(V),A=a(2522),M=a.n(A),R=a(2523),B=a.n(R);function q(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,c=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw c}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var U=Object(b.b)("Root")(n=Object(b.b)("Community")(n=Object(b.c)(n=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).fetchVideoTreeData=function(){try{var e=a.props.Community.SecurityMonitor;e.fetchVideoTreeData({param:{data:{productCode:"ezviz"}}}).then((function(){a.setState({defaultSelectKey:["all"],treeData:e.computedVideoTreeData},(function(){}))})).catch((function(e){}))}catch(t){}},a.fetchVideoDataList=function(){try{var e=a.props.Community,t=a.state,n=t.pageSize,i=t.pageIndex,c=void 0===i?1:i,o=t.orgId,r=t.projectId,l=t.buildingId,d={data:{equipment:{productCode:"ezviz"},pager:{pageRows:n,pageIndex:c,paged:!0},orderBy:{orderColumn:"t.createTime",orderType:"desc"}}};w.a.notEmpty(o)?d.data.equipment.orgId=o:w.a.notEmpty(r)?d.data.equipment.projectId=r:w.a.notEmpty(l)&&(d.data.equipment.deviceBuildInId=l),e.IntelligentSecurity.fetchVideoDataList({param:d}).then((function(e){var t=e.record.reduce((function(e,t){return e[t.deviceId]=t,e}),{});t.accessToken=e.accessToken,S.a.setItem("videoListData",t),a.setState({videoDataList:e.record||[],totalRows:e.totalRows,isLoading:!1},(function(){a.initialPlayerInstance()}))})).catch((function(){a.setState({isLoading:!1})}))}catch(s){}},a.initialPlayerInstance=function(){var e=a.state.videoDataList;try{var t,n=q(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.reservedField3&&(a["player".concat(i.deviceId)]=new window.EZUIKit.EZUIPlayer("playWind".concat(i.deviceId)),a["player".concat(i.deviceId)].pause())}}catch(c){n.e(c)}finally{n.f()}}catch(o){}},a.uninstallPlayerInstance=function(){var e=a.state.videoDataList;try{e.map((function(e){a["player".concat(e.deviceId)]&&a["player".concat(e.deviceId)].stop()}))}catch(t){}},a.handleVideoReload=Object(F.throttle)((function(e,t){try{var n=a.state.videoDataList;a["player".concat(e.deviceId)].stop(),a["player".concat(e.deviceId)]=new window.EZUIKit.EZUIPlayer("playWind".concat(e.deviceId)),n[t].isPlay=!0,n[t].isFirstPlay=!0,a.setState({videoDataList:Object(u.a)(n)})}catch(i){}}),500,{trailing:!1}),a.handleVideoReload2=Object(F.throttle)((function(e,t){try{var n=document.getElementById("playWind".concat(e.deviceId)),i=a.state.videoDataList2;n.load(),i[t].isPlay=!1,i[t].isFirstPlay=!1,i[t].dateStr=(new Date).getTime(),i[t].timer&&(clearInterval(i[t].timer),i[t].timer=null),a.setState({videoDataList2:Object(u.a)(i)})}catch(c){}}),500,{trailing:!1}),a.handleVideoPlayChange=Object(F.throttle)((function(e,t,n){try{var i=a.state.videoDataList;!0===n?(a["player".concat(e)].play(),i[t].isPlay=!0,i[t].isFirstPlay=!0):(a["player".concat(e)].pause(),i[t].isPlay=!1,i[t].isFirstPlay=!0),a.setState({videoDataList:Object(u.a)(i)})}catch(c){}}),500,{trailing:!1}),a.handleVideoPlayChange2=Object(F.throttle)((function(e,t,n){try{var i=a.state.videoDataList2,c=document.getElementById("playWind".concat(e));!0===n?(c.play(),i[t].isPlay=!0,i[t].isFirstPlay=!0,i[t].timer=setInterval((function(){var e=a.state.videoDataList2;e[t].dateStr+=1e3,a.setState({videoDataList2:Object(u.a)(e)})}),1e3)):(c.pause(),i[t].isPlay=!1,i[t].isFirstPlay=!0,i[t].timer&&(clearInterval(i[t].timer),i[t].timer=null)),a.setState({videoDataList2:Object(u.a)(i)})}catch(o){}}),500,{trailing:!1}),a.handleVideoMutedChange=Object(F.throttle)((function(e,t,n){try{var i=a.state.videoDataList;i[t].isMuted=n,a.setState({videoDataList:Object(u.a)(i)})}catch(c){}}),500,{trailing:!1}),a.handleVideoMutedChange2=Object(F.throttle)((function(e,t,n){try{var i=a.state.videoDataList2;i[t].isMuted=n,a.setState({videoDataList2:Object(u.a)(i)})}catch(c){}}),500,{trailing:!1}),a.handleFullScreen=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen()},a.handleExitFullScreen=function(){if(!0===a.checkFull()){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()}},a.checkFull=function(){return void 0!==document.mozFullScreen?document.mozFullScreen:void 0!==document.webkitIsFullScreen?document.webkitIsFullScreen:null!==document.msFullscreenElement},a.handleCapturePicture=Object(F.throttle)((function(e,t){try{var n=document.getElementById("playWind".concat(e)),i=a.checkFull()||!1,c=document.createElement("canvas");c.width=i?n.parentNode.offsetWidth:n.videoWidth,c.height=i?n.parentNode.offsetHeight:n.videoHeight,c.getContext("2d").drawImage(n,0,0,c.width,c.height);for(var o=c.toDataURL("image/png").split(","),r=o[0].match(/:(.*?);/)[1],l=atob(o[1]),d=l.length,s=new Uint8Array(d);d--;)s[d]=l.charCodeAt(d);var u=new Blob([s],{type:r}),m=window.URL.createObjectURL(u),v=document.createElement("a");v.style.display="none",v.href=m,v.download=t||"pic",document.body.appendChild(v),v.click(),setTimeout((function(){document.body.removeChild(v),window.URL.revokeObjectURL(m)}),1e3)}catch(h){}}),500,{trailing:!1}),a.handleToVideoPlayback=Object(F.throttle)((function(e){var t=a.props.history;e.reservedField1&&t.push("/community/bigScreen/videoPlayback/".concat(e.deviceId))}),500,{trailing:!1}),a.handleControlChangeFullScreen=Object(F.throttle)((function(e,t,n){var i=a.state.videoDataList;try{var c=document.getElementById("playWind".concat(e)).parentNode;!0===n?(a.handleFullScreen(c),i[t].isFullScreen=!0):(a.handleExitFullScreen(),i[t].isFullScreen=!1),a.setState({videoDataList:Object(u.a)(i)})}catch(o){}}),500,{trailing:!1}),a.handleControlChangeFullScreen2=Object(F.throttle)((function(e,t,n){var i=a.state.videoDataList2;try{var c=document.getElementById("playWind".concat(e)).parentNode;!0===n?(a.handleFullScreen(c),i[t].isFullScreen=!0):(a.handleExitFullScreen(),i[t].isFullScreen=!1),a.setState({videoDataList2:Object(u.a)(i)})}catch(o){}}),500,{trailing:!1}),a.handleViewChange=Object(F.throttle)((function(){if(!1===a.checkFull()){var e=a.state,t=e.videoDataList,n=e.videoDataList2,i=t.map((function(e){return Object(s.a)({},e,{isFullScreen:!1})})),c=n.map((function(e){return Object(s.a)({},e,{isFullScreen:!1})}));a.setState({videoDataList:i,videoDataList2:c})}return!1}),500,{trailing:!1}),a.onPageChange=Object(F.throttle)((function(e){a.uninstallPlayerInstance(),a.setState({pageIndex:e},(function(){}))}),500,{trailing:!1}),a.handleTreeSelect=Object(F.throttle)((function(e,t){try{var n=t.node.props,i=n.orgId,c=n.projectId,o=n.buildingId;if(220===a.state.orgId)return!1;a.uninstallPlayerInstance(),a.setState({orgId:i,projectId:c,buildingId:o},(function(){}))}catch(r){}}),500,{trailing:!1}),a.state={pageIndex:1,totalRows:0,pageSize:6,isLoading:!0,titleArr:[{id:1,name:"total",number:"459/448/11",desc:"\u8bbe\u5907\u603b\u6570/\u5728\u7ebf\u8bbe\u5907/\u79bb\u7ebf\u8bbe\u5907"},{id:2,name:"active",number:"15/13/2",desc:"\u544a\u8b66\u603b\u6570/\u5df2\u5904\u7406/\u672a\u5904\u7406"}],videoDataList:[],videoDataList2:[{deviceId:10001,src:T.a,dateStr:(new Date).getTime(),address:"\u5c0f\u533a\u4e1c\u95e8"},{deviceId:10002,src:B.a,dateStr:(new Date).getTime(),address:"\u5c0f\u533a\u5357\u95e8"},{deviceId:10003,src:M.a,dateStr:(new Date).getTime(),address:"\u5c0f\u533a\u897f\u5317\u89d2"},{deviceId:10004,src:z.a,dateStr:(new Date).getTime(),address:"\u9732\u5929\u505c\u8f66\u573a"},{deviceId:10005,src:x.a,dateStr:(new Date).getTime(),address:"12\u680b\u697c\u9053"},{deviceId:10006,src:P.a,dateStr:(new Date).getTime(),address:"\u7269\u4e1a\u4e2d\u5fc3\u5927\u95e8"}],treeData:[],expandedKey:[],orgId:"",projectId:"",buildingId:""},a}return Object(f.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.fetchVideoTreeData(),window.addEventListener("resize",this.handleViewChange)}},{key:"componentWillUnmount",value:function(){this.state.videoDataList2.map((function(e){return e.time&&(clearInterval(e.timer),e.timer=null),!1})),this.uninstallPlayerInstance(),window.removeEventListener("resize",this.handleViewChange),this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.titleArr,n=t.treeData,i=t.expandedKey,s=t.videoDataList,u=t.isLoading,m=t.videoDataList2,v=t.orgId;return g.a.createElement("div",{className:k.a.container},g.a.createElement(C.a,{titleArr:a}),g.a.createElement(E.a,{titleText:"\u76d1\u63a7\u5927\u5c4f"}),g.a.createElement(c.a,{style:{background:"#fff",height:"100%",padding:"30px"}},g.a.createElement(o.a,{gutter:24},g.a.createElement(l.a,{xxl:4,xl:6,sm:8},Array.isArray(n)&&n.length>0&&g.a.createElement(d.a,{className:k.a.tree,treeData:n,defaultExpandedKeys:i,onSelect:this.handleTreeSelect})),g.a.createElement(l.a,{xxl:20,xl:18,sm:16},220!==v&&!1===u&&Array.isArray(s)&&s.length<=0?g.a.createElement(r.a,{image:r.a.PRESENTED_IMAGE_SIMPLE}):g.a.createElement(o.a,{gutter:24,className:k.a["video-list"]},220!==v&&s.map((function(t,a){return g.a.createElement(l.a,{md:12,xxl:8,key:t.deviceId},g.a.createElement("div",{className:k.a["video-item"]},g.a.createElement("video",{id:"playWind".concat(t.deviceId),autoPlay:!1,className:k.a.video,muted:!!t.isMuted},g.a.createElement("source",{src:t.reservedField3,type:"video/mp4"}),"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301video\u6807\u7b7e"),!0===!t.isFirstPlay?g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange(t.deviceId,a,!0)},className:"iconfont iconplay ".concat(k.a["video-switch"])}):null,g.a.createElement("div",{className:k.a["video-address"]},t.installAddress),g.a.createElement("div",{className:k.a["video-bottom"]},g.a.createElement("div",{className:k.a["video-bottom-left"]},!0===t.isPlay?g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange(t.deviceId,a,!1)},className:"iconfont iconzanting1"}):g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange(t.deviceId,a,!0)},className:"iconfont iconplay1"}),g.a.createElement("i",{onClick:function(){return e.handleVideoReload(t,a)},className:"iconfont iconzhongzhi"})),g.a.createElement("div",{className:k.a["video-bottom-right"]},t.isMuted?g.a.createElement("i",{onClick:function(){e.handleVideoMutedChange(t.deviceId,a,!1)},className:"iconfont iconjingyin"}):g.a.createElement("i",{onClick:function(){e.handleVideoMutedChange(t.deviceId,a,!0)},className:"iconfont iconshengyin"}),g.a.createElement("i",{onClick:function(){e.handleCapturePicture(t.deviceId,t.installAddress)},className:"iconfont iconpaizhao"}),g.a.createElement("i",{onClick:function(){e.handleToVideoPlayback(t)},className:"iconfont iconkechenghuifang"}),!0===t.isFullScreen?g.a.createElement("i",{onClick:function(){e.handleControlChangeFullScreen(t.deviceId,a,!1)},className:"iconfont iconziyuanldpi"}):g.a.createElement("i",{onClick:function(){e.handleControlChangeFullScreen(t.deviceId,a,!0)},className:"iconfont iconziyuanldpi1"})))))})),m.map((function(t,a){return g.a.createElement(l.a,{md:12,xxl:8,key:t.deviceId},g.a.createElement("div",{className:k.a["video-item"]},g.a.createElement("video",{id:"playWind".concat(t.deviceId),className:k.a.video,width:"600",heihgt:"400",loop:!0,muted:!!t.isMuted},g.a.createElement("source",{src:t.src,type:"video/mp4"}),"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301video\u6807\u7b7e"),!0===!t.isFirstPlay?g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange2(t.deviceId,a,!0)},className:"iconfont iconplay ".concat(k.a["video-switch"])}):null,g.a.createElement("div",{className:k.a["video-address"]},t.address),g.a.createElement("div",{className:k.a["video-time"]},D()(t.dateStr).format("YYYY-MM-DD HH:mm:ss")),g.a.createElement("div",{className:k.a["video-bottom"]},g.a.createElement("div",{className:k.a["video-bottom-left"]},!0===t.isPlay?g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange2(t.deviceId,a,!1)},className:"iconfont iconzanting1"}):g.a.createElement("i",{onClick:function(){e.handleVideoPlayChange2(t.deviceId,a,!0)},className:"iconfont iconplay1"}),g.a.createElement("i",{onClick:function(){return e.handleVideoReload2(t,a)},className:"iconfont iconzhongzhi"})),g.a.createElement("div",{className:k.a["video-bottom-right"]},t.isMuted?g.a.createElement("i",{onClick:function(){e.handleVideoMutedChange2(t.deviceId,a,!1)},className:"iconfont iconjingyin"}):g.a.createElement("i",{onClick:function(){e.handleVideoMutedChange2(t.deviceId,a,!0)},className:"iconfont iconshengyin"}),g.a.createElement("i",{onClick:function(){e.handleCapturePicture(t.deviceId,t.installAddress)},className:"iconfont iconpaizhao"}),!0===t.isFullScreen?g.a.createElement("i",{onClick:function(){e.handleControlChangeFullScreen2(t.deviceId,a,!1)},className:"iconfont iconziyuanldpi"}):g.a.createElement("i",{onClick:function(){e.handleControlChangeFullScreen2(t.deviceId,a,!0)},className:"iconfont iconziyuanldpi1"})))))}))),g.a.createElement(I.a,{current:1,total:1,pageSize:6,onPageChange:this.onPageChange})))))}}]),t}(y.Component))||n)||n)||n;t.default=i.a.create()(U)},2517:function(e,t,a){e.exports={tree:"tree__1Wy8L","tab-wrap":"tab-wrap__3TN9l","video-list":"video-list__3-3kh","video-item":"video-item__2Yv_Q","video-bottom":"video-bottom__20n7J",video:"video__3gmlm","video-switch":"video-switch__2Ejui","video-time":"video-time__1I-7e","video-address":"video-address__2Z2X8","video-bottom-right":"video-bottom-right__3XcJV","video-off-line":"video-off-line__DCqME"}},2518:function(e,t,a){e.exports=a.p+"static/media/video1.a080db4d.mp4"},2519:function(e,t,a){e.exports=a.p+"static/media/video2.988e5cc7.mp4"},2520:function(e,t,a){e.exports=a.p+"static/media/video3.c3c953a8.mp4"},2521:function(e,t,a){e.exports=a.p+"static/media/video4.771a425d.mp4"},2522:function(e,t,a){e.exports=a.p+"static/media/video5.ceb05fc7.mp4"},2523:function(e,t,a){e.exports=a.p+"static/media/video6.c695758d.mp4"}}]);