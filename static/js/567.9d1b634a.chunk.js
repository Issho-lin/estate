(window.webpackJsonp=window.webpackJsonp||[]).push([[567],{2810:function(e,t,a){"use strict";a.r(t);var r,o=a(0),n=a.n(o),i=a(6),u=a(9),c=a(11),l=a(67),m=a(65),s=a(66),f=(a(419),a(206)),p=a(4),h=a.n(p),d=a(53),R=a(1610),y=a(63),b=a(1624),v=a(97),g=a(28),C=f.a.Content,D=Object(v.a)((function(){return a.e(23).then(a.bind(null,1796))})),O=Object(v.a)((function(){return Promise.all([a.e(0),a.e(2),a.e(1),a.e(3),a.e(11)]).then(a.bind(null,1712))})),j=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(13)]).then(a.bind(null,1713))})),E=Object(y.b)("Family")(r=Object(y.b)("Root")(r=Object(y.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).setHomeNav=function(){var e=a.props.Root,t=a.state.homeRoute;e.routerArr.length||(e.createNavTab({name:"\u9996\u9875",id:t.id,path:t.actionUrl||"/family"}),e.updateBreadCrumbs([t.id]))},a.queryChildResource=Object(i.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=_.find(g.a.getItem("firstMenuList").firstMenuList.resourcesList,{resourceCode:"characteIndustry"}),r=_.find(t.children,{resourceCode:"family"}).resourceId,e.next=5,a.props.Root.queryChildResource({param:{data:{resources:{upper:r}}}});case 5:a.setItemWithRoute(a.props.Root.routerData),a.setState({myRouteData:a.props.Root.routerData,homeRoute:(a.props.Root.routerData||[])[0]||{}},(function(){a.setHomeNav()})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),a.getSubRouterChildren=function(e,t,r,o){a.props.Root.querySubChild({param:{data:{resources:{upper:e},resourceLevel:r}}},o).then((function(e){if(e){if(g.a.getItem("familyRoute")){var t=g.a.getItem("familyRoute").familyRoute;a.props.Root.setRouterChild(e.currentRouter.id,t,e.childData),a.setItemWithRoute(t)}else a.setItemWithRoute(childData);a.setState({myRouteData:g.a.getItem("familyRoute").familyRoute})}}))},a.setItemWithRoute=function(e){g.a.setItem("familyRoute",JSON.stringify({familyRoute:e}))},a.renderRoute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e,t){return e.children?a.renderRoute(e.children):h.a.createElement(d.c,{exact:!0,key:t,path:e.actionUrl,component:b.c[e.actionUrl]})}))},a.familyRoute=(g.a.getItem("familyRoute")||{}).familyRoute,a.state={myRouteData:a.familyRoute,homeRoute:(a.familyRoute||[])[0]||{}},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.myRouteData;e&&e.length?this.setHomeNav():this.queryChildResource()}},{key:"render",value:function(){var e=this.props,t=e.Root,a=e.Family,r=this.state,o=r.myRouteData,n=r.homeRoute;return h.a.createElement("div",null,h.a.createElement(f.a,null,h.a.createElement(R.a,{routerData:o||[],store:a,getChildren:this.getSubRouterChildren}),h.a.createElement(f.a,{style:{padding:"1.6rem .2rem .2rem",backgroundColor:t.bgColor,position:"relative"}},h.a.createElement(C,{style:{background:"#fff"}},h.a.createElement(d.e,null,this.renderRoute(o),h.a.createElement(d.c,{exact:!0,path:"/family/securityDevice",component:O}),h.a.createElement(d.c,{exact:!0,path:"/family/monitoringScreen",component:j}),h.a.createElement(d.c,{exact:!0,path:"/family/deviceCenter",component:D}),n.actionUrl&&h.a.createElement(d.c,{exact:!0,path:"/family/",component:function(){return h.a.createElement(d.b,{to:n.actionUrl||"/family/deviceCenter"})}}))))))}}]),t}(p.Component))||r)||r)||r;t.default=E}}]);