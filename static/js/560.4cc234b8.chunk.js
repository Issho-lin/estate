(window.webpackJsonp=window.webpackJsonp||[]).push([[560],{2659:function(e,a,t){"use strict";t.r(a);var n,r=t(77),i=t(9),l=t(11),o=t(67),s=t(65),c=t(66),m=(t(1399),t(1400)),d=t(4),p=t.n(d),u=t(1),f=t(63),h=t(12),b=t.n(h),v=t(1625),y=t(133),g=t.n(y),L=t(243),w=t(16),E=t(245),S=t(35),F=t.n(S),x=t(2660),N=t.n(x),_=m.a.MonthPicker,O=g()().subtract(1,"months").format("YYYY-MM-DD"),I=Object(f.b)("Root")(n=Object(f.c)(n=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(s.a)(a).call(this,e))).redrawCharts=function(){try{t.deviceTypeInstance.resize(),t.deviceLivenessInstance.resize(),t.appLivenessInstance.resize(),t.userLivenessInstance.resize()}catch(e){}},t.renderDeviceType=function(e,a,t){var n={title:{text:"\u8bbe\u5907\u7c7b\u578b\u5206\u5e03",x:"3%",y:"3%",textStyle:{fontSize:"110%",color:"#FFFFFF"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},textStyle:{fontSize:"95%"},color:["#FF698E","#677CFB","#25B4FB","#3EFFFE","#BDFD71","#FEDE5A"],legend:{y:"85%",orient:"horizontal",data:t,textStyle:{color:"#A9C3E4",padding:[0,10,0,0],fontSize:13},icon:"circle",itemWidth:12,itemHeight:12},series:[{name:"\u8bbe\u5907\u6570\u91cf",type:"pie",radius:"55%",center:["50%","50%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{labelLine:{show:!0,length:15,length2:15}}}}]};e.setOption(n)},t.renderDeviceLiveness=function(e,a){var t={title:[{text:"\u8bbe\u5907\u6d3b\u8dc3\u5ea6",x:"3%",y:"3%",textStyle:{fontSize:"110%",color:"#FFFFFF"}}],tooltip:{trigger:"axis"},textStyle:{fontSize:"95%"},legend:{y:"85%",data:["\u5b89\u9632\u7c7b","\u5bb6\u7535\u7c7b","\u7167\u660e\u7c7b","\u95e8\u9501\u7c7b","\u73af\u5883\u7c7b","\u5176\u4ed6"],icon:"circle",textStyle:{color:"#A9C3E4",padding:[0,10,0,0],fontSize:13},itemWidth:12,itemHeight:12},xAxis:{data:a,splitLine:{show:!1},axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}}},yAxis:{min:0,max:6e3,splitLine:{show:!0,lineStyle:{color:"rgba(169, 195, 228, 0.1)"}},axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}}},grid:{left:"5%",right:"2%",top:"18%",bottom:"20%",containLabel:!0},series:[{name:"\u5b89\u9632\u7c7b",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(1500,1560,a.length),itemStyle:{normal:{color:"#25B4FB"}}},{name:"\u5bb6\u7535\u7c7b",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(1800,2e3,a.length),itemStyle:{normal:{color:"#FF698E"}}},{name:"\u7167\u660e\u7c7b",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(800,950,a.length),itemStyle:{normal:{color:"#677CFB"}}},{name:"\u95e8\u9501\u7c7b",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(380,400,a.length),itemStyle:{normal:{color:"#BDFD71"}}},{name:"\u73af\u5883\u7c7b",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(260,340,a.length),itemStyle:{normal:{color:"#3EFFFE"}}},{name:"\u5176\u4ed6",stack:"\u8bbe\u5907",type:"bar",barWidth:10,data:Object(L.l)(270,320,a.length),itemStyle:{normal:{color:"#FEDE5A"}}}]};e.setOption(t)},t.renderAppLiveness=function(e,a){var t={title:[{text:"APP\u7528\u6237\u6d3b\u8dc3\u5ea6",x:"3%",y:"3%",textStyle:{fontSize:"110%",color:"#FFFFFF"}}],color:["#3EFFFE"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"2%",top:"18%",bottom:"15%",containLabel:!0},xAxis:[{type:"category",data:a,splitLine:{show:!1},axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}},axisTick:{alignWithLabel:!0}}],yAxis:{min:0,max:900,interval:150,splitLine:{show:!0,lineStyle:{color:"rgba(169, 195, 228, 0.1)"}},axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}}},series:[{name:"APP\u7528\u6237\u6d3b\u8dc3\u5ea6",type:"bar",barWidth:10,data:Object(L.l)(600,800,a.length)}]};e.setOption(t)},t.renderUserLiveness=function(e,a){var t=a.length,n={title:[{text:"\u8bbe\u5907\u65b0\u589e\u6982\u51b5",x:"3%",y:"3%",textStyle:{fontSize:"110%",color:"#FFFFFF"}}],grid:{left:"5%",right:"2%",top:"18%",bottom:"20%",containLabel:!0},color:["#25B4FB","#FF698E","#677CFB","#BDFD71","#3EFFFE","#FEDE5A"],textStyle:{fontSize:"95%"},legend:{textStyle:{color:"#92b1d8",padding:[0,10,0,0],fontSize:13},y:"85%",itemWidth:12,itemHeight:12,data:["\u5b89\u9632\u7c7b","\u5bb6\u7535\u7c7b","\u7167\u660e\u7c7b","\u95e8\u9501\u7c7b","\u73af\u5883\u7c7b","\u5176\u4ed6"],icon:"circle"},tooltip:{trigger:"axis",textStyle:{align:"left"}},xAxis:[{axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}},type:"category",boundaryGap:!1,data:a}],yAxis:[{splitLine:{show:!0,lineStyle:{color:"rgba(169, 195, 228, 0.1)"}},axisLabel:{textStyle:{fontSize:"95%",color:"#A9C3E4"}},name:"",type:"value",min:0,max:70,interval:10}],series:[{name:"\u5b89\u9632\u7c7b",type:"line",data:Object(L.l)(4,17,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(37,180,251, 0)"},{offset:.5,color:"rgba(37, 180, 251, .3)"},{offset:0,color:"rgba(37, 180, 251, .5)"}])}}},{name:"\u5bb6\u7535\u7c7b",type:"line",data:Object(L.l)(10,30,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(255, 105, 142, 0)"},{offset:.5,color:"rgba(255, 105, 142, .3)"},{offset:0,color:"rgba(255, 105, 142, .5)"}])}}},{name:"\u7167\u660e\u7c7b",type:"line",data:Object(L.l)(5,25,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(103, 124, 251, 0)"},{offset:.5,color:"rgba(103, 124, 251, .3)"},{offset:0,color:"rgba(103, 124, 251, .5)"}])}}},{name:"\u95e8\u9501\u7c7b",type:"line",data:Object(L.l)(1,15,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(189, 253, 113, 0)"},{offset:.5,color:"rgba(189, 253, 113, .3)"},{offset:0,color:"rgba(189, 253, 113, .5)"}])}}},{name:"\u73af\u5883\u7c7b",type:"line",data:Object(L.l)(5,15,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(62, 255, 254, 0)"},{offset:.5,color:"rgba(62, 255, 254, .3)"},{offset:0,color:"rgba(62, 255, 254, .5)"}])}}},{name:"\u5176\u4ed6",type:"line",data:Object(L.l)(10,30,t),areaStyle:{normal:{color:new b.a.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(254, 222, 90, 0)"},{offset:.5,color:"rgba(254, 222, 90, .3)"},{offset:0,color:"rgba(254, 222, 90, .5)"}])}}}]};e.setOption(n)},t.getDays=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.split("-"),a=t.state.days;switch(Number(e[1])){case 4:case 6:case 9:case 11:return a.slice(0,30);case 2:return g()([Number(e[0])]).isLeapYear()?a.slice(0,29):a.slice(0,28);default:return a}},t.datePick=function(e,a,n){var i;if(t.dateArr=Object(w.d)(e._d,"YYYY-MM-DD").split("-"),"year"===a){var l;if(!(Number(t.dateArr[0])<g()().year()))return t.setState((l={},Object(r.a)(l,n,!1),Object(r.a)(l,a,g()(g()().year(),"YYYY")),l)),void t.renderUserLiveness(t.userLivenessInstance,t.state.months.slice(0,g()().month()));t.renderUserLiveness(t.userLivenessInstance,t.state.months)}else t.days=t.getDays(t.dateArr),"month1"===a?t.renderDeviceLiveness(t.deviceLivenessInstance,t.days):t.renderAppLiveness(t.appLivenessInstance,t.days);t.setState((i={},Object(r.a)(i,a,e),Object(r.a)(i,n,!1),i))},t.disabledDate=function(e){return e&&g()(e).isAfter(O,"month")},t.getCurrentWeather=function(e){try{new window.globalMap.Geocoder({}).getAddress(e,(function(e,a){if("complete"===e&&"OK"===a.info){var n=a.regeocode.addressComponent,r=n.province,i=n.city||r;(new window.globalMap.Weather).getLive(i,(function(e,a){t.setState({weatherInfo:a||{}})}))}}))}catch(a){t.setState({weatherInfo:{}})}},t.state={cards:[{num:11465,name:"\u5efa\u7b51\u9762\u79ef"},{num:3,name:"\u697c\u680b\u6570"},{num:407,name:"\u623f\u5c4b\u6570"},{num:1236,name:"\u4e1a\u4e3b\u6570"},{num:2370,name:"\u8bbe\u7f6e\u603b\u6570"},{num:2037,name:"\u5728\u7ebf\u6570"},{num:100,name:"\u79bb\u7ebf\u6570"},{num:23,name:"\u6545\u969c\u6570"}],alarmList:[{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"5\u680b",room:"502\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u91cd\u8981\u544a\u8b66",alarmGrade:2,building:"2\u680b",room:"101\u53f7\u623f",alarmName:"\u8bbe\u5907\u79bb\u7ebf\u544a\u8b66",alarmInfo:"\u70df\u611f\u8bbe\u5907\u79bb\u7ebf\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"1\u680b",room:"102\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"1\u680b",room:"102\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"1\u680b",room:"102\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"3\u680b",room:"314\u53f7\u623f",alarmName:"\u8bbe\u5907\u79bb\u7ebf\u544a\u8b66",alarmInfo:"\u70df\u611f\u8bbe\u5907\u79bb\u7ebf\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"1\u680b",room:"102\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"4\u680b",room:"431\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"},{alarmGradeName:"\u4e00\u822c\u544a\u8b66",alarmGrade:1,building:"1\u680b",room:"118\u53f7\u623f",alarmName:"\u8bbe\u5907\u6545\u969c\u544a\u8b66",alarmInfo:"\u95e8\u9501\u5f02\u5e38\uff0c\u8bf7\u901f\u5904\u7406"}],deviceTypeLengend:["\u5bb6\u7535\u7c7b","\u7167\u660e\u7c7b","\u5b89\u9632\u7c7b","\u73af\u5883\u7c7b","\u95e8\u9501\u7c7b","\u5176\u4ed6"],deviceTypeData:[{value:2035,name:"\u5bb6\u7535\u7c7b"},{value:990,name:"\u7167\u660e\u7c7b"},{value:1560,name:"\u5b89\u9632\u7c7b"},{value:356,name:"\u73af\u5883\u7c7b"},{value:438,name:"\u95e8\u9501\u7c7b"},{value:326,name:"\u5176\u4ed6"}],weatherInfo:{},year:g()(g()().year(),"YYYY"),month1:g()(O,"YYYY-MM"),month2:g()(O,"YYYY-MM"),months:["1","2","3","4","5","6","7","8","9","10","11","12"],days:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},Object(u.m)((function(){return{collapsed:e.Root.collapsed,run:e.Root.redraw}}),(function(e,a){e.run?t.reaction=a:setTimeout((function(){t.redrawCharts()}),300)})),t}return Object(c.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.state,t=a.deviceTypeData,n=a.deviceTypeLengend,r=a.months,i=this.getDays();this.props.Root.redrawStatus(1),this.props.Root.setCurrentUrl(this.props.location.pathname),setTimeout((function(){try{e.deviceTypeInstance=b.a.init(e.deviceType),e.renderDeviceType(e.deviceTypeInstance,t,n),e.deviceLivenessInstance=b.a.init(e.deviceLiveness),e.renderDeviceLiveness(e.deviceLivenessInstance,i),e.appLivenessInstance=b.a.init(e.appLiveness),e.renderAppLiveness(e.appLivenessInstance,i),e.userLivenessInstance=b.a.init(e.userLiveness),e.renderUserLiveness(e.userLivenessInstance,r.slice(0,g()().month()))}catch(a){}}),300),this.timer=setInterval((function(){e.alarm=e.state.alarmList[0],e.alarmList=e.state.alarmList,e.alarmList.shift(),e.alarmList.push(e.alarm),e.setState({alarmList:e.alarmList})}),1e3),this.getCurrentWeather([114.057868,22.543099]),window.addEventListener("resize",this.redrawCharts)}},{key:"componentWillUnmount",value:function(){try{this.deviceTypeInstance.dispose(),this.deviceLivenessInstance.dispose(),this.appLivenessInstance.dispose(),this.userLivenessInstance.dispose(),this.reaction.dispose(),this.props.Root.redrawStatus(0)}catch(e){}clearInterval(this.timer),this.timer=null,window.removeEventListener("resize",this.redrawCharts),this.setState=function(){}}},{key:"render",value:function(){var e=this,a=this.state,n=a.cards,i=a.alarmList,l=a.weatherInfo,o=a.year,s=a.isopen,c=a.month1,d=a.month2,u=v.a;return p.a.createElement("div",{className:N.a.family_view},p.a.createElement("div",{className:N.a.info_tab},p.a.createElement("h3",null,"\u5171\u548c\u57ce\u90a6\u9879\u76ee\u6982\u89c8"),p.a.createElement("span",{className:N.a.date_info},Object(w.d)(new Date,"MM\u6708DD\u65e5 W"),"\xa0\xa0\u519c\u5386",Object(w.e)()),p.a.createElement("span",{className:N.a.address_info},"\u5e7f\u4e1c\u7701 \u6df1\u5733\u5e02"),Object.values(l).length>0&&p.a.createElement("span",{className:N.a.weather_info},p.a.createElement("img",{src:t(1627)("./".concat(u[l.weather],".png")),alt:""}),l.temperature,"\u2103 ",l.weather,"\uff08\u5b9e\u65f6\uff09 \u98ce\u529b",l.windPower)),p.a.createElement("div",{className:N.a.content},p.a.createElement("div",{className:N.a.top},p.a.createElement("div",{className:N.a.cards},n.map((function(e,a){return p.a.createElement("div",{key:a},p.a.createElement("span",null,Object(E.c)(e.num)),p.a.createElement("i",null,e.name))}))),p.a.createElement("div",{className:N.a.list},p.a.createElement("h3",null,"\u544a\u8b66\u4fe1\u606f"),p.a.createElement("ul",null,i.slice(0,5).map((function(e,a){return p.a.createElement("li",{key:a},p.a.createElement("span",{className:F()(Object(r.a)({},N.a.urgency,2===e.alarmGrade))},(new Date).toTimeString().split(" ")[0]),p.a.createElement("span",{className:F()(Object(r.a)({},N.a.urgency,2===e.alarmGrade))},"\u3010",e.alarmGradeName,"\u3011"),p.a.createElement("i",null,e.building," ",e.room," ",e.alarmName,"\uff1a",e.alarmInfo))}))))),p.a.createElement("div",{className:N.a.center},p.a.createElement("div",null,p.a.createElement("div",{className:N.a.charts,ref:function(a){return e.deviceType=a}})),p.a.createElement("div",{className:N.a.charts},p.a.createElement(_,{dropdownClassName:"my_date_picker",placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:function(a){return e.datePick(a,"month1")},value:c,allowClear:!1,disabledDate:this.disabledDate}),p.a.createElement("div",{className:N.a.charts,ref:function(a){return e.deviceLiveness=a}}))),p.a.createElement("div",{className:N.a.bottom},p.a.createElement("div",null,p.a.createElement(_,{dropdownClassName:"my_date_picker",placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:function(a){return e.datePick(a,"month2")},value:d,allowClear:!1,disabledDate:this.disabledDate}),p.a.createElement("div",{className:N.a.charts,ref:function(a){return e.appLiveness=a}})),p.a.createElement("div",null,p.a.createElement(m.a,{placeholder:"\u8bf7\u9009\u62e9\u5e74\u4efd",allowClear:!1,value:o,open:s,mode:"year",format:"YYYY",dropdownClassName:"my_date_picker",onFocus:function(){e.setState({isopen:!0})},onPanelChange:function(a){return e.datePick(a,"year","isopen")}}),p.a.createElement("div",{className:N.a.charts,ref:function(a){return e.userLiveness=a}})))))}}]),a}(d.Component))||n)||n;a.default=I},2660:function(e,a,t){e.exports={family_view:"family_view__1AjpN",info_tab:"info_tab__1ZgxJ",weather_info:"weather_info__1-LFS",content:"content__lUAvd",top:"top__1YwVl",cards:"cards__P5HiR",list:"list__36Gv5",urgency:"urgency__1F_r_",center:"center__1UH4M",bottom:"bottom__1JniQ",charts:"charts__2cC_L"}}}]);